<script>

  <% ingredient_array.each do |i| %>
  // Adds pantry ingredient to ingredient list
  $("#ingredient-<%=i.gsub(" ","_")%>").click(function(){
  var htmlstring = $("h4#list").html();
  var commastring
  if (htmlstring == ""){commastring = "";}
    else {commastring = ", ";}
  $("h4#list").html(htmlstring + commastring + "<%=i%>");
    $("#ingredient-<%=i.gsub(" ","_")%>").css('display','none');});

  // reset ingredient list and restores pantry
  $("#reset_ingredients").click(function(){
    $("h4#list").html("");

    if ($("#ingredient-<%=i.gsub(" ","_")%>").css('display')==='none'){
      $("#ingredient-<%=i.gsub(" ","_")%>").fadeIn();
    }
  });

  // hides ingredients already included
  <% i_list.each do |i| %>
    $("#ingredient-<%=i.gsub(" ","_")%>").css('display','none')
  <% end %>

  <%end%>
  $("#ingredient-submit").click(function(){
    var completed_list = $("h4#list").html();
    $("#submitted-list").val(completed_list);
  });

  $("#undo-button").click(function(){
    location.reload();
  });

  $(window).unload(function() {
    window.location.reload();
    alert("page has reloaded");
  });

</script>